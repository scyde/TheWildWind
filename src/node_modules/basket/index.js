import React, { Component } from 'react'
import { connect } from 'react-redux'
import BasketList from './list'
import CheckoutButtons from './checkout'
import BasketShipping from 'basket/shipping'
import './basket.css'

class Basket extends Component {
    constructor() {
        super()
        this.state = {
            page: 1
        }
    }
    switchPage = next => {
        const curPage = this.state.page
        if (next && curPage < 3)
            this.setState({
                page: curPage + 1
            })
        else if (!next && curPage > 1)
            this.setState({
                page: curPage - 1
            })
    }
    render() {
        const { page } = this.state
        return this.props.basket.length > 0 ? (
            <div className="basket">
                {page == 1 ? (
                    <BasketList />
                ) : page == 2 ? (
                    <BasketShipping />
                ) : null}
                <CheckoutButtons page={page} switchPage={this.switchPage} />
            </div>
        ) : (
            'Ваша корзина пуста :('
        )
    }
}

const mapStateToProps = state => {
    return {
        basket: state.items.basket
    }
}

export default connect(mapStateToProps)(Basket)
